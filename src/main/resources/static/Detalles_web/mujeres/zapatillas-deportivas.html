<!DOCTYPE html>
<html lang="es">
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zapatillas Deportivas para Mujeres - Detalles</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <a href="../../../templates/index.html" class="logo-link">
                        <img src="../../img/detalles-logo.png" alt="Detalles - Calzados y Accesorios">
                    </a>
                </div>
                
                <ul class="nav-menu">
                    <li><a href="../../../templates/index.html">Inicio</a></li>
                    <li class="menu-item-has-children">
                        <a href="#mujeres">Mujeres <i class="fas fa-chevron-down"></i></a>
                        <div class="submenu">
                            <div class="submenu-content">
                                <div class="submenu-column">
                                    <h3>Calzado</h3>
                                    <ul>
                                        <li><a href="zapatillas-deportivas.html">Zapatillas Deportivas</a></li>
                                        <li><a href="zapatos-casuales.html">Zapatos Casuales</a></li>
                                        <li><a href="tacones.html">Tacones</a></li>
                                        <li><a href="sandalias.html">Sandalias</a></li>
                                        <li><a href="botas.html">Botas</a></li>
                                    </ul>
                                </div>
                                <div class="submenu-column">
                                    <h3>Accesorios</h3>
                                    <ul>
                                        <li><a href="../mujeres-accesorios/bolsos.html">Bolsos</a></li>
                                        <li><a href="../mujeres-accesorios/billeteras.html">Billeteras</a></li>
                                        <li><a href="../mujeres-accesorios/gafas-de-sol.html">Gafas de Sol</a></li>
                                        <li><a href="../mujeres-accesorios/cinturones.html">Cinturones</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                     <li class="menu-item-has-children">
                        <a href="#hombres">Hombres <i class="fas fa-chevron-down"></i></a>
                        <div class="submenu">
                            <div class="submenu-content">
                                <div class="submenu-column">
                                    <h3>Calzado</h3>
                                    <ul>
                                        <li><a href="../hombres/zapatillas-deportivas-h.html">Zapatillas Deportivas</a></li>
                                        <li><a href="../hombres/zapatos-casuales-h.html">Zapatos Casuales</a></li>
                                        <li><a href="../hombres/zapatos-formales-h.html">Zapatos Formales</a></li>
                                        <li><a href="../hombres/botas-h.html">Botas</a></li>
                                        <li><a href="../hombres/sandalias-h.html">Sandalias</a></li>
                                    </ul>
                                </div>
                                <div class="submenu-column">
                                    <h3>Accesorios</h3>
                                    <ul>
                                        <li><a href="../hombres-accesorios/cinturones-h.html">Cinturones</a></li>
                                        <li><a href="../hombres-accesorios/relojes-h.html">Relojes</a></li>
                                        <li><a href="../hombres-accesorios/gafas-de-sol-h.html">Gafas de Sol</a></li>
                                        <li><a href="../hombres-accesorios/billeteras-h.html">Billeteras</a></li>
                                        <li><a href="../hombres-accesorios/gorros-h.html">Gorros</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="menu-item-has-children">
                        <a href="#ninos">Niños <i class="fas fa-chevron-down"></i></a>
                        <div class="submenu">
                            <div class="submenu-content">
                                <div class="submenu-column">
                                    <h3>Calzado</h3>
                                    <ul>
                                        <li><a href="../niños/zapatillas-deportivas.html">Zapatillas Deportivas</a></li>
                                        <li><a href="../niños/zapatos-casuales.html">Zapatos Casuales</a></li>
                                        <li><a href="../niños/zapatos-escolares.html">Zapatos Escolares</a></li>
                                        <li><a href="../niños/pantuflas.html">Pantuflas</a></li>
                                        <li><a href="../niños/sandalias.html">Sandalias</a></li>
                                        <li><a href="../niños/botas.html">Botas</a></li>
                                    </ul>
                                </div>
                                <div class="submenu-column">
                                    <h3>Accesorios</h3>
                                    <ul>
                                        <li><a href="../niños-accesorios/calcetines.html">Calcetines</a></li>
                                        <li><a href="../niños-accesorios/cinturones.html">Cinturones</a></li>
                                        <li><a href="../niños-accesorios/gorras.html">Gorras</a></li>
                                        <li><a href="../niños-accesorios/lentes-sol.html">Lentes</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
                
                <div class="nav-icons">
                    <div class="search-container">
                        <div class="search-form">
                            <input type="text" id="searchInput" placeholder="Buscar productos..." class="search-input">
                            <button onclick="buscarProductos()" class="search-button">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                    
                    <a href="../login/logueo.html" class="nav-icon"><i class="fas fa-user"></i></a>
                    <a href="../carrito/carritos.html" class="nav-icon cart-icon">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="cart-count">0</span>
                    </a>
                </div>

                <div id="searchOverlay" class="search-overlay">
                    <div class="search-container">
                        <span class="close-search">&times;</span>
                        <div class="search-content">
                            <h2>¿Qué estás buscando?</h2>
                            <form class="search-form">
                                <input type="text" class="search-input" placeholder="Buscar productos...">
                                <button type="submit" class="search-button">
                                    <i class="fas fa-search"></i>
                                </button>
                            </form>
                            <div class="search-suggestions">
                                <h3>Sugerencias populares:</h3>
                                <div class="suggestion-tags">
                                    <span class="tag">Zapatillas Cuero</span>
                                    <span class="tag">Zapatillas Adidas</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="hamburger">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </nav>
    </header>

    <div class="search-overlay" id="searchOverlay">
        <div class="search-container">
            <span class="close-search">&times;</span>
            <div class="search-content">
                <h2>¿Qué estás buscando?</h2>
                <form class="search-form">
                    <input type="text" class="search-input" placeholder="Buscar productos...">
                    <button type="submit" class="search-button">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
                <div class="search-suggestions">
                    <h3>Sugerencias populares:</h3>
                    <div class="suggestion-tags">
                        <span class="tag">Zapatillas Running</span>
                        <span class="tag">Nike Air Max</span>
                        <span class="tag">Adidas Ultraboost</span>
                        <span class="tag">Zapatillas Gym</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="../../index.html">Inicio</a> / 
            <a href="../../index.html#mujeres">Mujer</a> / 
            <span>Zapatillas Deportivas</span>
        </div>
    </div>

    <section class="products-page">
        <div class="products-container">
            <aside class="filters-sidebar">
                <div class="filter-section">
                    <h3>Precio</h3>
                    <div class="price-filter">
                        <input type="range" class="price-range" min="0" max="300" value="200">
                        <div class="price-inputs">
                            <input type="number" placeholder="Mín" value="0">
                            <input type="number" placeholder="Máx" value="200">
                        </div>
                    </div>
                </div>

                <!-- <div class="filter-section">
                    <h3>Talla</h3>
                    <div class="size-filter">
                        <div class="size-option">35</div>
                        <div class="size-option">36</div>
                        <div class="size-option">37</div>
                        <div class="size-option">38</div>
                        <div class="size-option">39</div>
                        <div class="size-option">40</div>
                        <div class="size-option">41</div>
                        <div class="size-option">42</div>
                        <div class="size-option">43</div>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Color</h3>
                    <div class="color-filter">
                        <div class="color-option" style="background: #000;" title="Negro"></div>
                        <div class="color-option" style="background: #fff; border: 1px solid #ddd;" title="Blanco"></div>
                        <div class="color-option" style="background: #ff0000;" title="Rojo"></div>
                        <div class="color-option" style="background: #0000ff;" title="Azul"></div>
                        <div class="color-option" style="background: #ffd700;" title="Dorado"></div>
                        <div class="color-option" style="background: #808080;" title="Gris"></div>
                    </div>
                </div> -->

                <div class="filter-section">
                    <h3>Marca</h3>
                    <div class="brand-filter">
                        <label class="brand-option">
                            <input type="checkbox"> Nike
                        </label>
                        <label class="brand-option">
                            <input type="checkbox"> Adidas
                        </label>
                        <label class="brand-option">
                            <input type="checkbox"> Puma
                        </label>
                        <label class="brand-option">
                            <input type="checkbox"> New Balance
                        </label>
                        <label class="brand-option">
                            <input type="checkbox"> Reebok
                        </label>
                    </div>
                </div>

                
                <div class="filter-section">
                    <h3>Material</h3>
                    <div class="brand-filter">
                        <div class="brand-option">
                            <input type="checkbox" id="cuero">
                            <label for="cuero">Cuero</label>
                        </div>
                        <div class="brand-option">
                            <input type="checkbox" id="sintetico">
                            <label for="sintetico">Sintético</label>
                        </div>
                        <div class="brand-option">
                            <input type="checkbox" id="lona">
                            <label for="lona">Lona</label>
                        </div>
                        <div class="brand-option">
                            <input type="checkbox" id="gamusa">
                            <label for="gamusa">Gamusa</label>
                        </div>
                    </div>
                </div>
                <button class="btn-add-cart" style="width: 100%; margin-top: 1rem;">
                    Aplicar Filtros
                </button>
            </aside>

            <main class="products-main">
                <div class="products-header">
                    <h1>Zapatillas Deportivas</h1>
                    <div class="sort-options">
                        <span class="products-count">16 productos</span>
                      
                    </div>
                </div>

                <div class="products-grid-detailed" id="productosContainer">
                    <div class="loading-message">Cargando zapatillas deportivas...</div>
                </div>

                <div class="pagination">
                </div>
            </main>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Detalles</h3>
                    <p>Tu destino para calzados y accesorios de calidad.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Servicios</h3>
                    <ul>
                        <li><a href="../Servicios/guia_tallas.html">Guía de Tallas</a></li>
                        <li><a href="../Servicios/preguntas.html">Asistente</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Newsletter</h3>
                    <p>Suscríbete para recibir ofertas exclusivas</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="Tu email" required>
                        <button type="submit">Suscribirse</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Detalles. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <div id="quickViewModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-body">
            </div>
        </div>
    </div>

    <script src="../../js/script.js"></script>
    <script src="../../js/carrito.js"></script>

    <script>
    // Variables globales
    let todosLosProductos = [];
    let productosFiltrados = [];

    // Cargar productos al iniciar la página
    document.addEventListener('DOMContentLoaded', function() {
        cargarZapatillasDeportivasMujeres();
        configurarFiltros();
    });

    // Función principal para cargar productos
    async function cargarZapatillasDeportivasMujeres() {
        try {
            console.log('Cargando zapatillas deportivas para mujeres...');
            
            const response = await fetch('/api/productos/buscar?categoria=mujeres&tipo=zapatillas-deportivas');
            
            if (!response.ok) {
                throw new Error('Error en la respuesta de la API');
            }
            
            const productos = await response.json();
            console.log('Productos cargados:', productos);
            
            todosLosProductos = productos;
            productosFiltrados = [...productos];
            
            mostrarProductos(productos);
            actualizarContadorProductos(productos.length);
            
        } catch (error) {
            console.error('Error cargando productos:', error);
            document.getElementById('productosContainer').innerHTML = 
                '<p class="error-message">Error al cargar los productos. Intenta nuevamente.</p>';
        }
    }

    // Función para mostrar productos en la página
    function mostrarProductos(productos) {
        const contenedor = document.getElementById('productosContainer');
        
        if (!productos || productos.length === 0) {
            contenedor.innerHTML = `
                <div class="no-products">
                    <i class="fas fa-search" style="font-size: 48px; color: #ccc; margin-bottom: 20px;"></i>
                    <h3>No se encontraron zapatillas deportivas</h3>
                    <p>Intenta con otros filtros o términos de búsqueda.</p>
                </div>
            `;
            return;
        }

        contenedor.innerHTML = productos.map(producto => `
            <div class="product-card-detailed" data-product-id="${producto.id}">
                <div class="product-image-detailed">
                    <img src="${producto.imagenUrl || '../../img/mujeres-calzados/calzado-default.jpg'}" 
                         alt="${producto.nombre}" 
                         onerror="this.src='../../img/mujeres-calzados/calzado-default.jpg'">
                    <div class="product-overlay">
                        <button class="quick-view" onclick="vistaRapida(${producto.id})">Vista Rápida</button>
                    </div>
                </div>
                <div class="product-info-detailed">
                    <div class="product-brand">${producto.marca || 'MARCA'}</div>
                    <h3 class="product-title-detailed">${producto.nombre}</h3>
                    <div class="product-price">
                        <span class="current-price">S/ ${producto.precioVenta || producto.precio || '0.00'}</span>
                    </div>
                    <div class="product-actions">
                        <button class="btn-add-cart" onclick="agregarAlCarrito(${producto.id})">
                            Añadir al Carrito
                        </button>
                        <button class="btn-wishlist" onclick="agregarFavoritos(${producto.id})">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Función para búsqueda desde el navbar
    async function buscarProductos() {
        const searchTerm = document.getElementById('searchInput').value.trim();
        
        if (!searchTerm) {
            cargarZapatillasDeportivasMujeres();
            return;
        }
        
        try {
            console.log('Buscando:', searchTerm);
            const response = await fetch(`/api/productos/buscar?nombre=${encodeURIComponent(searchTerm)}&categoria=mujeres`);
            const productos = await response.json();
            
            productosFiltrados = productos;
            mostrarProductos(productos);
            actualizarContadorProductos(productos.length);
            
        } catch (error) {
            console.error('Error en búsqueda:', error);
        }
    }

    // Configurar eventos de filtros
    function configurarFiltros() {
        const precioRange = document.querySelector('.price-range');
        const precioMin = document.querySelector('.price-inputs input[placeholder="Mín"]');
        const precioMax = document.querySelector('.price-inputs input[placeholder="Máx"]');
        
        if (precioRange && precioMin && precioMax) {
            precioRange.addEventListener('input', function() {
                precioMax.value = this.value;
                aplicarFiltros();
            });
            
            precioMin.addEventListener('change', aplicarFiltros);
            precioMax.addEventListener('change', aplicarFiltros);
        }
        
        const tallas = document.querySelectorAll('.size-option');
        tallas.forEach(talla => {
            talla.addEventListener('click', function() {
                this.classList.toggle('selected');
                aplicarFiltros();
            });
        });
        
        const colores = document.querySelectorAll('.color-option');
        colores.forEach(color => {
            color.addEventListener('click', function() {
                this.classList.toggle('selected');
                aplicarFiltros();
            });
        });
        
        const marcas = document.querySelectorAll('.brand-option input[type="checkbox"]');
        marcas.forEach(marca => {
            marca.addEventListener('change', aplicarFiltros);
        });
        
        const btnAplicar = document.querySelector('.btn-add-cart[style*="width: 100%"]');
        if (btnAplicar) {
            btnAplicar.addEventListener('click', aplicarFiltros);
        }
    }

    // Función para aplicar todos los filtros
    function aplicarFiltros() {
        let productos = [...todosLosProductos];
        
        const precioMin = document.querySelector('.price-inputs input[placeholder="Mín"]')?.value || 0;
        const precioMax = document.querySelector('.price-inputs input[placeholder="Máx"]')?.value || 9999;
        
        productos = productos.filter(producto => {
            const precio = producto.precioVenta || producto.precio || 0;
            return precio >= parseInt(precioMin) && precio <= parseInt(precioMax);
        });
        
        const marcasSeleccionadas = Array.from(document.querySelectorAll('.brand-option input[type="checkbox"]:checked'))
            .map(cb => cb.parentElement.textContent.trim().toLowerCase());
        
        if (marcasSeleccionadas.length > 0) {
            productos = productos.filter(producto => 
                producto.marca && marcasSeleccionadas.includes(producto.marca.toLowerCase())
            );
        }
        
        productosFiltrados = productos;
        mostrarProductos(productos);
        actualizarContadorProductos(productos.length);
    }

    // Actualizar contador de productos
    function actualizarContadorProductos(cantidad) {
        const contador = document.querySelector('.products-count');
        if (contador) {
            contador.textContent = `${cantidad} producto${cantidad !== 1 ? 's' : ''}`;
        }
    }

    // Funciones auxiliares
    function vistaRapida(productoId) {
        alert(`Vista rápida del producto ${productoId}`);
    }

    function agregarAlCarrito(productoId) {
        alert(`Producto ${productoId} agregado al carrito`);
    }

    function agregarFavoritos(productoId) {
        alert(`Producto ${productoId} agregado a favoritos`);
    }

    // Permitir búsqueda con Enter
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    buscarProductos();
                }
            });
        }
    });
    </script>
<!-- Modal de Detalles de Producto -->
<div id="modalProducto" class="modal-producto">
    <div class="modal-contenido">
        <span class="modal-cerrar" id="cerrarModal">&times;</span>
        <div class="modal-imagen">
            <img id="modalImg" src="" alt="Producto" />
        </div>
        <div class="modal-info">
            <h2 id="modalNombre"></h2>
            <div class="modal-precio" id="modalPrecio"></div>
            <p id="modalDescripcion"></p>
            <div class="modal-tallas">
                <label>Tallas:</label>
                <div id="modalTallas" class="cuadraditos"></div>
            </div>
            <div class="modal-colores">
                <label>Colores:</label>
                <div id="modalColores" class="cuadraditos"></div>
            </div>
            <button id="btnAgregarCarrito" class="btn-agregar">Agregar al Carrito</button>
        </div>
    </div>
</div>
<script>
// === MODAL DE DETALLES DE PRODUCTO ===
// Abre el modal y carga los datos del producto
async function abrirModalProducto(productoId) {
  const modal = document.getElementById('modalProducto');
  modal.classList.add('open');
  document.getElementById('modalTallas').innerHTML = '';
  document.getElementById('modalColores').innerHTML = '';
  let tallaSeleccionada = null, colorSeleccionado = null;

  // Fetch producto
  const res = await fetch('/api/productos/' + productoId);
  if (!res.ok) { alert('No se pudo cargar el producto'); return; }
  const prod = await res.json();

  document.getElementById('modalImg').src = prod.imagen || '../../img/mujeres-calzados/calzado-default.jpg';
  document.getElementById('modalNombre').innerText = prod.nombre;
  document.getElementById('modalPrecio').innerText = 'S/ ' + prod.precio;
  document.getElementById('modalDescripcion').innerText = prod.descripcion;

  // Tallas
  prod.tallas.forEach(talla => {
    const div = document.createElement('div');
    div.className = 'cuadrado' + (talla.disponible === false ? ' disabled' : '');
    div.innerText = talla.valor || talla;
    if (talla.disponible === false) div.setAttribute('disabled', 'true');
    div.onclick = function() {
      if (div.classList.contains('disabled')) return;
      document.querySelectorAll('#modalTallas .cuadrado').forEach(el => el.classList.remove('selected'));
      div.classList.add('selected');
      tallaSeleccionada = talla.valor || talla;
    };
    document.getElementById('modalTallas').appendChild(div);
  });

  // Colores
  prod.colores.forEach(color => {
    const div = document.createElement('div');
    div.className = 'cuadrado';
    div.innerText = color;
    div.onclick = function() {
      document.querySelectorAll('#modalColores .cuadrado').forEach(el => el.classList.remove('selected'));
      div.classList.add('selected');
      colorSeleccionado = color;
    };
    document.getElementById('modalColores').appendChild(div);
  });

  document.getElementById('btnAgregarCarrito').onclick = async function() {
    if (!tallaSeleccionada) { alert('Selecciona una talla'); return; }
    if (!colorSeleccionado) { alert('Selecciona un color'); return; }
    const body = {
      productoId: prod.id,
      talla: tallaSeleccionada,
      color: colorSeleccionado,
      cantidad: 1
    };
    const resp = await fetch('/api/cart/add', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(body)
    });
    if (resp.ok) {
      alert('¡Producto agregado al carrito!');
      cerrarModalProducto();
    } else {
      alert('No se pudo agregar al carrito');
    }
  };
}

function cerrarModalProducto() {
  document.getElementById('modalProducto').classList.remove('open');
}
document.getElementById('cerrarModal').onclick = cerrarModalProducto;

// Vincula cada producto del catálogo
setTimeout(() => {
  document.querySelectorAll('.product-card-detailed').forEach(card => {
    card.onclick = function() {
      const id = card.getAttribute('data-product-id');
      if (id) abrirModalProducto(id);
    };
  });
}, 500);
</script>
</body>
</html>